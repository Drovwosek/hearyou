# üéØ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø–æ–≤—ã—à–µ–Ω–∏—é —Ç–æ—á–Ω–æ—Å—Ç–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏

## –ü—Ä–æ–±–ª–µ–º–∞

STT —Å–∏—Å—Ç–µ–º—ã (–≤–∫–ª—é—á–∞—è Yandex SpeechKit) –∑–∞–º–µ–Ω—è—é—Ç —Ä–µ–¥–∫–∏–µ/–Ω–µ–∑–Ω–∞–∫–æ–º—ã–µ —Å–ª–æ–≤–∞ –Ω–∞ –ø–æ—Ö–æ–∂–∏–µ –ø–æ –∑–≤—É—á–∞–Ω–∏—é:

**–ü—Ä–∏–º–µ—Ä:**
- –ì–æ–≤–æ—Ä–∏—Ç—Å—è: "–ò–ò—à–∫–∞, –º–∏–ª–∏—à–∫–∞, —Å–≤–∏—Ç"
- –†–∞—Å–ø–æ–∑–Ω–∞—ë—Ç—Å—è: "–∏—Ä–∏—à–∫–∞ –º–µ–ª–∏—à–∫–∞ —Å–≤–∏—Ç–∞"

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: Post-processing (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `transcribe.py` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç —á–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏:

```bash
python3 transcribe.py audio.mp3 -v
```

**–í—ã–≤–æ–¥:**
```
üîß –ü—Ä–∏–º–µ–Ω–µ–Ω—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
   '–∏—Ä–∏—à–∫–∞' ‚Üí '–ò–ò—à–∫–∞'
   '–º–µ–ª–∏—à–∫–∞' ‚Üí '–º–∏–ª–∏—à–∫–∞'
   '—Å–≤–∏—Ç–∞' ‚Üí '—Å–≤–∏—Ç'
```

---

### –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–°–æ–∑–¥–∞–π JSON —Ñ–∞–π–ª —Å —Ç–≤–æ–∏–º–∏ –∑–∞–º–µ–Ω–∞–º–∏:

**my_corrections.json:**
```json
{
  "–∞—Ä—Ç—ë–º": "–ê—Ä—Ç—ë–º",
  "—Å–ø—Ä–∏–Ω—Ç": "–°–ü–†–ò–ù–¢", 
  "–∞–π—Å–ø—Ä–∏–Ω–≥": "iSpring",
  "—à—Ç–∏–≥–ª–∏—Ü": "–®—Ç–∏–≥–ª–∏—Ü"
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python3 transcribe.py audio.mp3 --corrections my_corrections.json -v
```

---

### –û—Ç–∫–ª—é—á–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```bash
python3 transcribe.py audio.mp3 --no-corrections
```

---

## üìù –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

–§–∞–π–ª: `stt_corrections.py`

```python
self.corrections = {
    "–∏—Ä–∏—à–∫–∞": "–ò–ò—à–∫–∞",
    "–º–µ–ª–∏—à–∫–∞": "–º–∏–ª–∏—à–∫–∞",
    "—Å–≤–∏—Ç–∞": "—Å–≤–∏—Ç",
    
    # –î–æ–±–∞–≤—å —Å–≤–æ–∏:
    "–∞—Ä—Ç—ë–º": "–ê—Ä—Ç—ë–º",
}
```

---

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã

### 1. –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è

–î–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ (–∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä—ã, —Ñ–æ—Ä–º–∞—Ç—ã):

**–í `stt_corrections.py`:**
```python
self.phonetic_patterns = [
    (r'\b\d+ –≥–æ–¥', r'\1–≥.'),  # "2024 –≥–æ–¥" ‚Üí "2024–≥."
    (r'www ', 'WWW '),        # "www –≥—É–≥–ª" ‚Üí "WWW –≥—É–≥–ª"
]
```

### 2. –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –∑–∞–º–µ–Ω—ã

–ï—Å–ª–∏ —Å–ª–æ–≤–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ç–æ–ª—å–∫–æ –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ:

```python
import re

def context_correct(text):
    # "—Å–ø—Ä–∏–Ω—Ç –º–µ—Ç–æ–¥" ‚Üí "–°–ü–†–ò–ù–¢ –º–µ—Ç–æ–¥"
    text = re.sub(r'—Å–ø—Ä–∏–Ω—Ç\s+(–º–µ—Ç–æ–¥|–∂—É—Ä–Ω–∞–ª|—Å–∏—Å—Ç–µ–º–∞)', 
                  r'–°–ü–†–ò–ù–¢ \1', text)
    return text
```

### 3. Python API

```python
from yandex_stt import YandexSTT
from stt_corrections import TranscriptionCorrector

stt = YandexSTT()
corrector = TranscriptionCorrector()

# –î–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–∏ –∑–∞–º–µ–Ω—ã
corrector.add_correction("–∞—Ä—Ç—ë–º", "–ê—Ä—Ç—ë–º")
corrector.add_correction("—Å–ø—Ä–∏–Ω—Ç", "–°–ü–†–ò–ù–¢")

# –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è
result = stt.transcribe_sync("audio.mp3", format='oggopus')
text = result['result']

# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
text = corrector.correct(text)
print(text)
```

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ò–º–µ–Ω–∞ –∏ –Ω–∏–∫–Ω–µ–π–º—ã

**–ü—Ä–æ–±–ª–µ–º–∞:** "–∏—Ä–∏—à–∫–∞" ‚Üí —Ö–æ—Ç–∏–º "–ò–ò—à–∫–∞"

**corrections.json:**
```json
{
  "–∏—Ä–∏—à–∫–∞": "–ò–ò—à–∫–∞",
  "–ø–µ—Ç—è": "–ü–µ—Ç—è",
  "–≤–∞—Å—å–∫–∞": "–í–∞—Å—å–∫–∞"
}
```

### –ü—Ä–∏–º–µ—Ä 2: –ê–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä—ã –∏ –±—Ä–µ–Ω–¥—ã

**–ü—Ä–æ–±–ª–µ–º–∞:** "–∞–π—Å–ø—Ä–∏–Ω–≥" ‚Üí —Ö–æ—Ç–∏–º "iSpring"

**corrections.json:**
```json
{
  "–∞–π—Å–ø—Ä–∏–Ω–≥": "iSpring",
  "—ç–π—á–∞—Ä": "HR",
  "–ø–∏–∞—Ä": "PR",
  "–∞–π—Ç–∏": "IT"
}
```

### –ü—Ä–∏–º–µ—Ä 3: –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã

**–ü—Ä–æ–±–ª–µ–º–∞:** "—Å–ø—Ä–∏–Ω—Ç –∂—É—Ä–Ω–∞–ª" ‚Üí —Ö–æ—Ç–∏–º "–°–ü–†–ò–ù–¢ –∂—É—Ä–Ω–∞–ª"

**corrections.json:**
```json
{
  "—Å–ø—Ä–∏–Ω—Ç": "–°–ü–†–ò–ù–¢",
  "–∞–≥–∞–ª": "Agile",
  "—Å–∫—Ä–∞–º": "Scrum"
}
```

---

## üéì –°–æ–≤–µ—Ç—ã –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Å–ª–æ–≤–∞—Ä—è

### 1. –°–æ–±–∏—Ä–∞–π —á–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

–ó–∞–ø–∏—Å—ã–≤–∞–π —á—Ç–æ STT —Å–ª—ã—à–∏—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:
```bash
# –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
python3 transcribe.py audio.mp3 --no-corrections > raw.txt

# –°—Ä–∞–≤–Ω–∏—Ç—å —Å –æ–∂–∏–¥–∞–µ–º—ã–º
diff raw.txt expected.txt
```

### 2. –ò—Å–ø–æ–ª—å–∑—É–π lowercase –¥–ª—è –∫–ª—é—á–µ–π

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
```json
{
  "–∏—Ä–∏—à–∫–∞": "–ò–ò—à–∫–∞",  // –∫–ª—é—á lowercase
  "–∞—Ä—Ç—ë–º": "–ê—Ä—Ç—ë–º"
}
```

**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
```json
{
  "–ò—Ä–∏—à–∫–∞": "–ò–ò—à–∫–∞",  // STT –≤—ã–¥–∞—ë—Ç lowercase
}
```

### 3. –¢–µ—Å—Ç–∏—Ä—É–π –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```bash
# –¢–µ—Å—Ç —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏
python3 transcribe.py test1.mp3 --corrections my.json -v

# –ü—Ä–æ–≤–µ—Ä—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
cat output.txt
```

---

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç **–º–≥–Ω–æ–≤–µ–Ω–Ω–æ** (< 1 –º—Å):
- –ü—Ä–æ—Å—Ç–∞—è –∑–∞–º–µ–Ω–∞ —Å–ª–æ–≤
- Regex –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π —Ñ–∞–π–ª corrections.json

```bash
cat > my_corrections.json << 'EOF'
{
  "–∏—Ä–∏—à–∫–∞": "–ò–ò—à–∫–∞",
  "–∞—Ä—Ç—ë–º": "–ê—Ä—Ç—ë–º"
}
EOF
```

### –®–∞–≥ 2: –ò—Å–ø–æ–ª—å–∑—É–π

```bash
python3 transcribe.py audio.mp3 --corrections my_corrections.json -v
```

### –®–∞–≥ 3: –û–±–Ω–æ–≤–ª—è–π —Å–ª–æ–≤–∞—Ä—å

–ü–æ –º–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–æ–±–∞–≤–ª—è–π –Ω–æ–≤—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ JSON.

---

## üìö –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã

### –î–ª—è async API (–¥–ª–∏–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã)

Yandex async API –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
- **Speaker labeling** (–∫—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç)
- **Custom models** (–æ–±—É—á–µ–Ω–∏–µ –Ω–∞ —Ç–≤–æ–∏—Ö –¥–∞–Ω–Ω—ã—Ö)
- **Vocabulary hints** (—Ä–∞–±–æ—Ç–∞—é—Ç –ª—É—á—à–µ –Ω–∞ –¥–ª–∏–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö)

### –î–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

1. **–ó–∞–ø–∏—Å—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∞—É–¥–∏–æ:**
   - –•–æ—Ä–æ—à–∏–π –º–∏–∫—Ä–æ—Ñ–æ–Ω
   - –ë–µ–∑ —Ñ–æ–Ω–æ–≤–æ–≥–æ —à—É–º–∞
   - –ß—ë—Ç–∫–∞—è –¥–∏–∫—Ü–∏—è

2. **–ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ —Ä–µ–¥–∫–∏—Ö —Å–ª–æ–≤:**
   - "–ú–µ–Ω—è –∑–æ–≤—É—Ç –ò–ò—à–∫–∞, –ø–∏—à–µ—Ç—Å—è –ò-–ò-—à-–∫-–∞"

3. **Post-processing + —Ä—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è + —á–µ–ª–æ–≤–µ–∫

---

## ‚úÖ –ò—Ç–æ–≥

**–õ—É—á—à–µ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Ç–≤–æ–µ–≥–æ —Å–ª—É—á–∞—è:**
1. –ò—Å–ø–æ–ª—å–∑—É–π –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (—É–∂–µ —Ä–∞–±–æ—Ç–∞—é—Ç!)
2. –°–æ–∑–¥–∞–≤–∞–π JSON —Ñ–∞–π–ª—ã –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
3. –û–±–Ω–æ–≤–ª—è–π —Å–ª–æ–≤–∞—Ä—å –ø–æ –º–µ—Ä–µ —Ä–∞–±–æ—Ç—ã

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ "–ò–ò—à–∫–∞ –º–∏–ª–∏—à–∫–∞ —Å–≤–∏—Ç" —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Å–ª–æ–≤–∞

---

*–ù–∞—Å—Ç—Ä–æ–µ–Ω–æ by Aquilla ü¶Ö*
